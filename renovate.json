{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    "security:openssf-scorecard",
    ":semanticCommits",
    ":dependencyDashboard",
    ":timezone(UTC)",
    "group:monorepos",
    "group:recommended",
    "workarounds:all"
  ],
  "description": "Renovate configuration for Recipe UI Service - Enterprise-grade dependency management",

  "platform": "github",
  "repositories": ["jsamuelsen/recipe-web-app"],
  "gitAuthor": "Renovate Bot <noreply@renovatebot.com>",
  "branchPrefix": "renovate/",
  "username": "renovate[bot]",

  "schedule": [
    "after 2am and before 6am on weekdays",
    "after 2am and before 8am on weekends"
  ],

  "timezone": "UTC",
  "platformCommit": "enabled",
  "requireConfig": "required",
  "onboarding": true,
  "dryRun": null,

  "prCreation": "not-pending",
  "prNotPendingHours": 2,
  "prHourlyLimit": 3,
  "prConcurrentLimit": 15,
  "branchConcurrentLimit": 20,

  "semanticCommits": "enabled",
  "commitMessagePrefix": "â¬†ï¸",
  "commitMessageAction": "update",
  "commitMessageExtra": "to v{{newVersion}}",
  "commitMessageSuffix": " {{#if isPinDigest}}(digest){{/if}}",

  "labels": ["dependencies", "renovate"],
  "addLabels": ["ğŸ”„ auto-update"],
  "assignees": ["@jsamuelsen"],
  "reviewers": ["jsamuelsen"],

  "dependencyDashboard": true,
  "dependencyDashboardTitle": "ğŸ”„ Dependency Dashboard",
  "dependencyDashboardHeader": "This issue lists Renovate updates and detected dependencies. Read the [Renovate Docs](https://docs.renovatebot.com/) to learn more.",
  "dependencyDashboardFooter": "âœ¨ **Need help?** Check out our [dependency management documentation](./docs/DEPENDENCIES.md)",

  "suppressNotifications": ["prIgnoreNotification"],
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": ["before 4am on monday"]
  },

  "separateMajorMinor": true,
  "separateMinorPatch": false,
  "separateMultipleMajor": true,
  "rangeStrategy": "bump",

  "packageRules": [
    {
      "description": "ğŸš¨ Security updates - highest priority",
      "matchDatasources": ["npm"],
      "matchUpdateTypes": ["patch", "pin", "digest"],
      "matchPackagePatterns": ["*"],
      "vulnerabilityAlertsOnly": true,
      "labels": ["ğŸš¨ security", "priority: high"],
      "prPriority": 10,
      "schedule": ["at any time"],
      "automerge": true,
      "automergeType": "pr",
      "automergeStrategy": "merge",
      "assignees": [],
      "reviewers": []
    },

    {
      "description": "ğŸ”§ Development dependencies - auto-merge patch updates",
      "matchDatasources": ["npm"],
      "matchDepTypes": ["devDependencies"],
      "matchUpdateTypes": ["patch"],
      "labels": ["devDependencies", "patch"],
      "automerge": true,
      "automergeType": "pr",
      "automergeStrategy": "merge",
      "prCreation": "immediate"
    },

    {
      "description": "ğŸ“¦ Production dependencies - patch updates (careful review)",
      "matchDatasources": ["npm"],
      "matchDepTypes": ["dependencies"],
      "matchUpdateTypes": ["patch"],
      "labels": ["dependencies", "patch"],
      "prPriority": 5,
      "schedule": ["after 3am and before 5am on weekdays"]
    },

    {
      "description": "âœ¨ Minor updates - grouped by type",
      "matchUpdateTypes": ["minor"],
      "labels": ["minor-update", "ğŸš€ feature-update"],
      "prPriority": 3,
      "schedule": ["after 3am and before 5am on monday"],
      "groupName": "Minor Dependencies",
      "commitMessagePrefix": "âœ¨"
    },

    {
      "description": "ğŸ’¥ Major updates - manual review required",
      "matchUpdateTypes": ["major"],
      "labels": [
        "major-update",
        "ğŸ’¥ breaking-change",
        "manual-review-required"
      ],
      "prPriority": 1,
      "schedule": ["after 3am and before 5am on sunday"],
      "automerge": false,
      "reviewersFromCodeOwners": true,
      "assigneesFromCodeOwners": true,
      "minimumReleaseAge": "7 days",
      "prBodyTemplate": "## ğŸ’¥ Major Update\n\nThis is a **major version update** that may contain breaking changes.\n\n### Before merging:\n- [ ] Review the changelog and breaking changes\n- [ ] Run full test suite locally\n- [ ] Test critical application flows\n- [ ] Update documentation if needed\n- [ ] Consider creating a feature branch for testing\n\n---\n{{{header}}}\n{{{table}}}\n{{{notes}}}\n{{{changelogs}}}"
    },

    {
      "description": "ğŸ­ Playwright - test framework updates",
      "matchPackageNames": ["@playwright/test", "playwright"],
      "labels": ["ğŸ­ playwright", "testing"],
      "prPriority": 4,
      "schedule": ["after 3am and before 5am on tuesday"],
      "minimumReleaseAge": "3 days"
    },

    {
      "description": "âš¡ Next.js framework updates",
      "matchPackageNames": ["next"],
      "labels": ["âš¡ nextjs", "framework"],
      "prPriority": 6,
      "schedule": ["after 3am and before 5am on wednesday"],
      "minimumReleaseAge": "5 days",
      "automerge": false
    },

    {
      "description": "ğŸ¨ React updates",
      "matchPackageNames": [
        "react",
        "react-dom",
        "@types/react",
        "@types/react-dom"
      ],
      "labels": ["âš›ï¸ react", "framework"],
      "prPriority": 6,
      "schedule": ["after 3am and before 5am on wednesday"],
      "minimumReleaseAge": "5 days",
      "automerge": false,
      "groupName": "React"
    },

    {
      "description": "ğŸ“ ESLint and code quality tools",
      "matchPackagePatterns": ["eslint", "prettier", "@typescript-eslint"],
      "matchPackageNames": ["stylelint", "lint-staged", "husky"],
      "labels": ["ğŸ“ code-quality", "tooling"],
      "prPriority": 4,
      "schedule": ["after 3am and before 5am on thursday"],
      "groupName": "Code Quality Tools",
      "automerge": true,
      "automergeType": "pr"
    },

    {
      "description": "ğŸ§ª Testing libraries and tools",
      "matchPackagePatterns": ["jest", "@testing-library", "vitest"],
      "matchPackageNames": ["jsdom", "happy-dom"],
      "labels": ["ğŸ§ª testing", "tooling"],
      "prPriority": 4,
      "schedule": ["after 3am and before 5am on friday"],
      "groupName": "Testing Tools"
    },

    {
      "description": "ğŸ”’ Security and audit tools",
      "matchPackageNames": [
        "secretlint",
        "audit-ci",
        "@secretlint/secretlint-rule-preset-recommend"
      ],
      "matchPackagePatterns": ["@secretlint"],
      "labels": ["ğŸ”’ security", "tooling"],
      "prPriority": 8,
      "schedule": ["at any time"],
      "automerge": true,
      "automergeType": "pr"
    },

    {
      "description": "ğŸ“¦ Bundle and build tools",
      "matchPackageNames": [
        "webpack",
        "rollup",
        "vite",
        "esbuild",
        "swc",
        "@swc/core"
      ],
      "labels": ["ğŸ“¦ build-tools", "tooling"],
      "prPriority": 3,
      "schedule": ["after 3am and before 5am on saturday"],
      "groupName": "Build Tools"
    },

    {
      "description": "ğŸ¯ TypeScript and type definitions",
      "matchPackageNames": ["typescript"],
      "matchPackagePatterns": ["@types/"],
      "labels": ["ğŸ¯ typescript", "types"],
      "prPriority": 5,
      "schedule": ["after 3am and before 5am on tuesday"],
      "groupName": "TypeScript & Types",
      "minimumReleaseAge": "3 days"
    },

    {
      "description": "ğŸ¨ Styling and UI libraries",
      "matchPackageNames": [
        "tailwindcss",
        "@tailwindcss/typography",
        "@tailwindcss/forms",
        "@tailwindcss/container-queries"
      ],
      "matchPackagePatterns": ["@headlessui", "@heroicons"],
      "labels": ["ğŸ¨ styling", "ui"],
      "prPriority": 3,
      "schedule": ["after 3am and before 5am on saturday"],
      "groupName": "Styling & UI"
    },

    {
      "description": "ğŸŒ API and data fetching libraries",
      "matchPackageNames": [
        "@tanstack/react-query",
        "@tanstack/react-query-devtools",
        "axios",
        "zustand"
      ],
      "labels": ["ğŸŒ api", "data"],
      "prPriority": 5,
      "schedule": ["after 3am and before 5am on wednesday"],
      "groupName": "API & State Management",
      "minimumReleaseAge": "2 days"
    },

    {
      "description": "ğŸ”§ Development and workflow tools",
      "matchPackageNames": [
        "commitizen",
        "cz-conventional-changelog",
        "@commitlint/cli",
        "@commitlint/config-conventional"
      ],
      "labels": ["ğŸ”§ dev-tools", "workflow"],
      "prPriority": 2,
      "schedule": ["after 3am and before 5am on saturday"],
      "groupName": "Development Tools",
      "automerge": true,
      "automergeType": "pr"
    },

    {
      "description": "ğŸ“Š Monitoring and analytics",
      "matchPackageNames": ["web-vitals", "lighthouse", "clinic"],
      "labels": ["ğŸ“Š monitoring", "performance"],
      "prPriority": 3,
      "schedule": ["after 3am and before 5am on friday"],
      "groupName": "Monitoring Tools"
    },

    {
      "description": "ğŸ­ Pin dependencies for reproducible builds",
      "matchPackagePatterns": ["*"],
      "matchUpdateTypes": ["pin"],
      "labels": ["ğŸ“Œ pin"],
      "prPriority": 2,
      "automerge": true,
      "automergeType": "pr"
    }
  ],

  "vulnerabilityAlerts": {
    "enabled": true,
    "schedule": ["at any time"],
    "labels": ["ğŸš¨ security", "vulnerability"],
    "prPriority": 10,
    "assignees": ["@jsamuelsen"]
  },

  "osvVulnerabilityAlerts": true,

  "regexManagers": [
    {
      "description": "Update Node.js version in Dockerfile",
      "fileMatch": ["Dockerfile", "Dockerfile.*"],
      "matchStrings": ["FROM node:(?<currentValue>.*?)\\s"],
      "datasourceTemplate": "docker",
      "depNameTemplate": "node",
      "versioningTemplate": "node"
    },
    {
      "description": "Update Node.js version in GitHub Actions",
      "fileMatch": [".github/workflows/.*\\.ya?ml$"],
      "matchStrings": ["node-version:\\s*['\"]?(?<currentValue>.*?)['\"]?\\s"],
      "datasourceTemplate": "node-version",
      "depNameTemplate": "node",
      "versioningTemplate": "node"
    }
  ],

  "dockerfile": {
    "enabled": true,
    "pinDigests": true
  },

  "docker": {
    "enabled": true,
    "pinDigests": true
  },

  "github-actions": {
    "enabled": true,
    "pinDigests": true
  },

  "pre-commit": {
    "enabled": true
  },

  "customManagers": [
    {
      "description": "Update versions in package.json engines",
      "customType": "regex",
      "fileMatch": ["package\\.json$"],
      "matchStrings": [
        "\"engines\":\\s*{[^}]*\"node\":\\s*\"[^\"]*?(?<currentValue>\\d+(?:\\.\\d+)?(?:\\.\\d+)?)\""
      ],
      "datasourceTemplate": "node-version",
      "depNameTemplate": "node",
      "versioningTemplate": "node"
    }
  ],

  "ignoreDeps": ["@types/node"],

  "ignorePresets": [":ignoreModulesAndTests"],

  "postUpgradeTasks": {
    "commands": [
      "npm audit fix --force || true",
      "npm run format || true",
      "npm run lint:fix || true"
    ],
    "fileFilters": ["package-lock.json", "**/*.{js,jsx,ts,tsx,json,md}"],
    "executionMode": "branch"
  },

  "prBodyDefinitions": {
    "Package": "**{{{depName}}}** (`{{{displayFrom}}}` â†’ `{{{displayTo}}}`)",
    "Notes": "{{{#if notes}}}### Release Notes\n\n{{{notes}}}\n\n{{{/if}}}",
    "Changelog": "{{#if hasReleaseNotes}}### Changelog\n\n{{{releaseNotes}}}\n\n{{/if}}",
    "Configuration": "ğŸ“‹ **Renovate configuration**: [renovate.json](https://github.com/{{{repository}}}/blob/main/renovate.json)"
  },

  "prBodyColumns": ["Package", "Update", "Change"],

  "prBodyNotes": [
    "This PR was generated by Renovate Bot.",
    "ğŸ¤– **Auto-merge**: {{{#if automerge}}}Enabled{{{else}}}Disabled{{{/if}}}",
    "ğŸ§ª **Tests**: Please ensure all CI checks pass before merging",
    "ğŸ“Š **Performance**: Check bundle size and performance impact"
  ],

  "statusCheckVerify": true,
  "requiredStatusChecks": [
    "ci/github-actions-ci",
    "security/github-actions-security"
  ],

  "stabilityDays": 2,
  "respectLatest": true,
  "followTag": "latest",

  "fetchReleaseNotes": true,
  "fetchChangeLogs": "pr",

  "transitiveRemediation": true,
  "vulnerabilitySeverityThreshold": "low"
}
