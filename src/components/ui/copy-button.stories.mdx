# CopyButton Component

A flexible, accessible copy button component that provides one-click copy functionality for sharing recipes and other content.

## Features

- **Modern Clipboard API** - Uses navigator.clipboard with fallback to execCommand
- **Visual Feedback** - Clear success/error states with animations
- **Recipe-Specific Variants** - Tailored styling for different recipe content types
- **Accessibility First** - ARIA labels, keyboard support, screen reader announcements
- **Multiple Variants** - Different styles and sizes for various use cases
- **TypeScript Ready** - Comprehensive type definitions
- **Customizable** - Extensive configuration options

## Basic Usage

```tsx
import { CopyButton } from '@/components/ui/copy-button';

// Simple text copy
<CopyButton content="Hello, World!">
  Copy Text
</CopyButton>

// With custom icon
<CopyButton
  content="https://example.com/recipe/123"
  icon="external-link"
  variant="outline"
>
  Share Recipe
</CopyButton>

// Icon only
<CopyButton
  content="Sample recipe content"
  iconOnly
  size="sm"
  variant="ghost"
/>
```

## Recipe-Specific Usage

```tsx
import { CopyButton } from '@/components/ui/copy-button';

const recipe = {
  id: '123',
  title: 'Chocolate Chip Cookies',
  url: 'https://example.com/recipe/123',
  ingredients: [
    { name: 'flour', amount: '2', unit: 'cups' },
    { name: 'sugar', amount: '1', unit: 'cup' },
    { name: 'chocolate chips', amount: '1', unit: 'cup' }
  ],
  instructions: [
    { step: 1, instruction: 'Preheat oven to 375Â°F' },
    { step: 2, instruction: 'Mix dry ingredients' },
    { step: 3, instruction: 'Add chocolate chips and bake for 10-12 minutes' }
  ],
  nutrition: { calories: 250, fat: '12g', carbs: '35g' },
  metadata: { servings: 24, prepTime: '15 min', cookTime: '12 min' }
};

// Copy different parts of the recipe
<CopyButton.Recipe
  recipe={recipe}
  copyType="ingredients"
  variant="outline"
  recipe="ingredient"
>
  Copy Ingredients
</CopyButton.Recipe>

<CopyButton.Recipe
  recipe={recipe}
  copyType="instructions"
  variant="outline"
  recipe="instruction"
>
  Copy Instructions
</CopyButton.Recipe>

<CopyButton.Recipe
  recipe={recipe}
  copyType="recipe-url"
  variant="outline"
  recipe="url"
>
  Share Recipe
</CopyButton.Recipe>
```

## Variants

### Button Variants
- `default` - Primary blue background
- `secondary` - Secondary gray background
- `outline` - Outlined button with border
- `ghost` - Transparent background with hover
- `link` - Text link style
- `success` - Green background for success states

### Sizes
- `sm` - Small size (32px height)
- `default` - Default size (36px height)
- `lg` - Large size (40px height)
- `icon` - Square icon-only button

### Recipe Variants
- `ingredient` - Green accent for ingredient content
- `instruction` - Blue accent for instruction content
- `url` - Purple accent for URL sharing
- `nutrition` - Orange accent for nutrition data

## Advanced Features

### Custom Content Transformation

```tsx
<CopyButton
  content="raw content"
  transformContent={(content) => `Formatted: ${content.toUpperCase()}`}
>
  Copy Transformed
</CopyButton>
```

### Async Content Loading

```tsx
<CopyButton
  content={async () => {
    const response = await fetch('/api/content');
    return response.text();
  }}
  loading={isLoading}
>
  Copy From API
</CopyButton>
```

### Event Handlers

```tsx
<CopyButton
  content="Example content"
  onCopyStart={() => console.log('Copy started')}
  onCopySuccess={(content) => console.log('Copied:', content)}
  onCopyError={(error) => console.error('Copy failed:', error)}
  onStatusChange={(status) => console.log('Status:', status)}
>
  Copy with Events
</CopyButton>
```

## Grouped Copy Buttons

```tsx
<CopyButton.Group spacing="default" orientation="horizontal">
  <CopyButton content="Text 1" size="sm">Copy 1</CopyButton>
  <CopyButton content="Text 2" size="sm">Copy 2</CopyButton>
  <CopyButton content="Text 3" size="sm">Copy 3</CopyButton>
</CopyButton.Group>
```

## Accessibility

The component includes comprehensive accessibility features:

- **ARIA Labels** - Descriptive labels for all states
- **Keyboard Support** - Full keyboard navigation
- **Screen Reader** - Live announcements for copy status
- **Focus Management** - Proper focus indication
- **High Contrast** - Works with system themes

### Custom Accessibility Labels

```tsx
<CopyButton
  content="Content to copy"
  copyLabel="Copy this content to clipboard"
  copyingLabel="Copying content..."
  successLabel="Content copied successfully"
  errorLabel="Failed to copy content"
  announceToScreenReader={true}
>
  Copy Content
</CopyButton>
```

## Browser Support

- **Modern Browsers** - Uses navigator.clipboard API
- **Legacy Support** - Fallback to document.execCommand
- **Security Context** - Requires HTTPS for modern API
- **Permissions** - Handles clipboard permission gracefully

## Component API

### CopyButton Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `content` | `string \| (() => string) \| (() => Promise<string>)` | - | Content to copy |
| `variant` | `'default' \| 'secondary' \| 'outline' \| 'ghost' \| 'link' \| 'success'` | `'default'` | Button style variant |
| `size` | `'sm' \| 'default' \| 'lg' \| 'icon'` | `'default'` | Button size |
| `recipe` | `'none' \| 'ingredient' \| 'instruction' \| 'url' \| 'nutrition'` | `'none'` | Recipe-specific styling |
| `icon` | `IconName` | `'copy'` | Icon to display |
| `successIcon` | `IconName` | `'check'` | Success state icon |
| `errorIcon` | `IconName` | `'alert-circle'` | Error state icon |
| `iconOnly` | `boolean` | `false` | Show icon only |
| `successMessage` | `string` | `'Copied!'` | Success feedback text |
| `errorMessage` | `string` | `'Failed to copy'` | Error feedback text |
| `resetDelay` | `number` | `2000` | Time before reset (ms) |
| `maxLength` | `number` | - | Max content length |
| `transformContent` | `(content: string) => string` | - | Content transformer |
| `onCopyStart` | `() => void` | - | Copy start callback |
| `onCopySuccess` | `(content: string) => void` | - | Copy success callback |
| `onCopyError` | `(error: Error) => void` | - | Copy error callback |
| `copyLabel` | `string` | `'Copy to clipboard'` | Accessibility label |
| `announceToScreenReader` | `boolean` | `true` | Screen reader announcements |

### Recipe Copy Button Props

| Prop | Type | Description |
|------|------|-------------|
| `recipe` | `Recipe` | Recipe data object |
| `copyType` | `'ingredients' \| 'instructions' \| 'url' \| 'nutrition' \| 'formatted-recipe'` | Type of content to copy |

## Examples

### Kitchen Timer Integration

```tsx
<CopyButton
  content={() => `Timer set for ${minutes} minutes at ${new Date().toLocaleTimeString()}`}
  variant="outline"
  icon="timer"
  recipe="instruction"
>
  Copy Timer Info
</CopyButton>
```

### Shopping List Generation

```tsx
<CopyButton.Recipe
  recipe={recipe}
  copyType="ingredients"
  transformContent={(ingredients) =>
    `Shopping List:\n${ingredients}\n\nGenerated from: ${recipe.title}`
  }
  variant="secondary"
  recipe="ingredient"
>
  Generate Shopping List
</CopyButton.Recipe>
```

### Social Sharing

```tsx
<CopyButton
  content={`Check out this amazing ${recipe.title} recipe! ${recipe.url}`}
  variant="outline"
  icon="share"
  successMessage="Ready to share!"
>
  Copy Share Text
</CopyButton>
```

This component provides a comprehensive solution for copy functionality in recipe applications, with extensive customization options and built-in accessibility features.
