import { Meta, Story, Canvas, ArgsTable, Description } from '@storybook/addon-docs';
import {
  Tooltip,
  TooltipTrigger,
  TooltipContent,
  TooltipProvider,
  SimpleTooltip,
  CookingTermTooltip,
  HelpTooltip,
  InfoTooltip,
  KeyboardTooltip,
  MetricTooltip,
} from './tooltip';

<Meta
  title="UI Components/Tooltip"
  component={Tooltip}
  decorators={[
    (Story) => (
      <TooltipProvider>
        <div className="p-8 flex items-center justify-center min-h-[200px]">
          <Story />
        </div>
      </TooltipProvider>
    ),
  ]}
  parameters={{
    docs: {
      description: {
        component: `
The Tooltip component provides contextual help and information for cooking terms, UI elements, and recipe details.
Built on Radix UI Tooltip with comprehensive styling options and specialized variants for recipe applications.

## Features

- Built on Radix UI Tooltip for full accessibility
- Multiple variants: default, light, accent, success, warning, error, info
- Size options: sm, default, lg, xl
- Specialized components for cooking terms, help text, keyboard shortcuts, and metrics
- Recipe-optimized styling and content formatting
- Automatic positioning and collision detection
- Keyboard navigation and screen reader support

## Usage

Use Tooltip for:
- Explaining cooking terms and techniques (julienne, sauté, mise en place)
- Providing help text for UI elements and form fields
- Displaying unit conversions and metric equivalents
- Showing keyboard shortcuts and quick actions
- Adding contextual information without cluttering the interface
- Enhancing accessibility with additional descriptions
        `
      }
    }
  }}
  argTypes={{
    variant: {
      control: { type: 'select' },
      options: ['default', 'light', 'accent', 'success', 'warning', 'error', 'info'],
      description: 'Visual style variant'
    },
    size: {
      control: { type: 'select' },
      options: ['sm', 'default', 'lg', 'xl'],
      description: 'Size of the tooltip content'
    },
    side: {
      control: { type: 'select' },
      options: ['top', 'right', 'bottom', 'left'],
      description: 'Preferred side for tooltip placement'
    },
    showArrow: {
      control: { type: 'boolean' },
      description: 'Whether to show the arrow pointing to trigger'
    }
  }}
/>

# Tooltip

<Description of={Tooltip} />

## Basic Tooltip

<Canvas>
  <Story name="Basic">
    {() => (
      <SimpleTooltip content="This is a helpful tooltip">
        <button className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
          Hover me
        </button>
      </SimpleTooltip>
    )}
  </Story>
</Canvas>

## Tooltip Variants

<Canvas>
  <Story name="Variants">
    {() => (
      <div className="grid grid-cols-2 gap-8 lg:grid-cols-4">
        <SimpleTooltip content="Default tooltip styling" variant="default">
          <div className="p-3 border rounded text-center cursor-help">Default</div>
        </SimpleTooltip>

        <SimpleTooltip content="Light theme tooltip" variant="light">
          <div className="p-3 border rounded text-center cursor-help">Light</div>
        </SimpleTooltip>

        <SimpleTooltip content="Accent color tooltip" variant="accent">
          <div className="p-3 border rounded text-center cursor-help">Accent</div>
        </SimpleTooltip>

        <SimpleTooltip content="Success notification" variant="success">
          <div className="p-3 border rounded text-center cursor-help">Success</div>
        </SimpleTooltip>

        <SimpleTooltip content="Warning message" variant="warning">
          <div className="p-3 border rounded text-center cursor-help">Warning</div>
        </SimpleTooltip>

        <SimpleTooltip content="Error information" variant="error">
          <div className="p-3 border rounded text-center cursor-help">Error</div>
        </SimpleTooltip>

        <SimpleTooltip content="Information tooltip" variant="info">
          <div className="p-3 border rounded text-center cursor-help">Info</div>
        </SimpleTooltip>

        <SimpleTooltip content="No arrow shown" showArrow={false}>
          <div className="p-3 border rounded text-center cursor-help">No Arrow</div>
        </SimpleTooltip>
      </div>
    )}
  </Story>
</Canvas>

## Tooltip Sizes

<Canvas>
  <Story name="Sizes">
    {() => (
      <div className="flex gap-8 items-center">
        <SimpleTooltip
          content="Small tooltip for compact information"
          size="sm"
        >
          <div className="p-2 border rounded text-center cursor-help text-sm">Small</div>
        </SimpleTooltip>

        <SimpleTooltip
          content="Default size tooltip with moderate amount of text content"
          size="default"
        >
          <div className="p-3 border rounded text-center cursor-help">Default</div>
        </SimpleTooltip>

        <SimpleTooltip
          content="Large tooltip that can contain more detailed information and longer explanations"
          size="lg"
        >
          <div className="p-3 border rounded text-center cursor-help">Large</div>
        </SimpleTooltip>

        <SimpleTooltip
          content="Extra large tooltip for comprehensive information, detailed explanations, and complex content that requires more space to display properly"
          size="xl"
        >
          <div className="p-4 border rounded text-center cursor-help">Extra Large</div>
        </SimpleTooltip>
      </div>
    )}
  </Story>
</Canvas>

## Positioning

<Canvas>
  <Story name="Positioning">
    {() => (
      <div className="grid grid-cols-2 gap-8">
        <SimpleTooltip content="Tooltip appears above" side="top">
          <div className="p-3 border rounded text-center cursor-help">Top</div>
        </SimpleTooltip>

        <SimpleTooltip content="Tooltip appears to the right" side="right">
          <div className="p-3 border rounded text-center cursor-help">Right</div>
        </SimpleTooltip>

        <SimpleTooltip content="Tooltip appears below" side="bottom">
          <div className="p-3 border rounded text-center cursor-help">Bottom</div>
        </SimpleTooltip>

        <SimpleTooltip content="Tooltip appears to the left" side="left">
          <div className="p-3 border rounded text-center cursor-help">Left</div>
        </SimpleTooltip>
      </div>
    )}
  </Story>
</Canvas>

## Cooking Terms

<Canvas>
  <Story name="Cooking Terms">
    {() => (
      <div className="space-y-6">
        <div className="space-y-2">
          <h3 className="text-lg font-semibold">Recipe Instructions</h3>
          <p>
            First, <CookingTermTooltip
              term="julienne"
              definition="To cut vegetables into thin, matchstick-like strips, typically 2-3mm wide and 4-5cm long"
              pronunciation="zhool-ee-EHN"
              category="technique"
            /> the carrots and bell peppers.
          </p>
          <p>
            Heat oil in a pan and <CookingTermTooltip
              term="sauté"
              definition="To cook quickly in a small amount of fat over high heat, stirring frequently"
              pronunciation="saw-TAY"
              category="technique"
            /> the vegetables until tender-crisp.
          </p>
          <p>
            Prepare your <CookingTermTooltip
              term="mise en place"
              definition="A French culinary term meaning 'everything in its place' - having all ingredients prepped and ready before cooking"
              pronunciation="MEES ahn plahs"
              category="general"
            /> before starting to cook.
          </p>
        </div>

        <div className="space-y-2">
          <h3 className="text-lg font-semibold">Ingredient Categories</h3>
          <p>
            Add <CookingTermTooltip
              term="aromatics"
              definition="Vegetables and herbs that provide a flavor base for dishes, typically onions, carrots, celery, garlic, and herbs"
              category="ingredient"
            /> to build the flavor foundation.
          </p>
          <p>
            Use a <CookingTermTooltip
              term="mandoline"
              definition="A kitchen tool with an adjustable blade for slicing vegetables uniformly and precisely"
              category="equipment"
            /> for consistently thin slices.
          </p>
        </div>
      </div>
    )}
  </Story>
</Canvas>

## Help and Info Icons

<Canvas>
  <Story name="Help Icons">
    {() => (
      <div className="space-y-6">
        <div className="space-y-4">
          <div className="flex items-center gap-2">
            <label className="font-medium">Recipe Difficulty</label>
            <HelpTooltip helpText="Difficulty levels: Easy (30 min or less), Medium (30-60 min), Hard (60+ min or advanced techniques)" />
          </div>

          <div className="flex items-center gap-2">
            <label className="font-medium">Serving Size</label>
            <InfoTooltip infoText="Recipe serves 4-6 people as a main dish, or 8-10 as a side dish" />
          </div>

          <div className="flex items-center gap-2">
            <label className="font-medium">Prep Time</label>
            <HelpTooltip
              helpText="Active preparation time not including resting, marinating, or passive cooking time"
              iconVariant="subtle"
              iconSize="sm"
            />
          </div>
        </div>

        <div className="space-y-4">
          <h3 className="text-lg font-semibold">Icon Variants</h3>
          <div className="flex gap-4">
            <div className="flex items-center gap-2">
              <span>Default</span>
              <HelpTooltip helpText="Default help icon styling" />
            </div>
            <div className="flex items-center gap-2">
              <span>Subtle</span>
              <HelpTooltip helpText="Subtle help icon styling" iconVariant="subtle" />
            </div>
            <div className="flex items-center gap-2">
              <span>Accent</span>
              <InfoTooltip infoText="Accent info icon styling" iconVariant="accent" />
            </div>
            <div className="flex items-center gap-2">
              <span>Success</span>
              <InfoTooltip infoText="Success info icon styling" iconVariant="success" />
            </div>
            <div className="flex items-center gap-2">
              <span>Warning</span>
              <InfoTooltip infoText="Warning info icon styling" iconVariant="warning" />
            </div>
          </div>
        </div>
      </div>
    )}
  </Story>
</Canvas>

## Keyboard Shortcuts

<Canvas>
  <Story name="Keyboard Shortcuts">
    {() => (
      <div className="space-y-4">
        <div className="flex items-center gap-2">
          <KeyboardTooltip shortcut={["Ctrl", "S"]} description="Save recipe">
            <button className="px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600">
              Save Recipe
            </button>
          </KeyboardTooltip>
        </div>

        <div className="flex items-center gap-2">
          <KeyboardTooltip shortcut="?" description="Show keyboard shortcuts">
            <button className="px-3 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">
              Help
            </button>
          </KeyboardTooltip>
        </div>

        <div className="flex items-center gap-2">
          <KeyboardTooltip shortcut={["Ctrl", "Shift", "N"]} description="Create new recipe">
            <button className="px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
              New Recipe
            </button>
          </KeyboardTooltip>
        </div>

        <div className="flex items-center gap-2">
          <KeyboardTooltip shortcut="/" description="Focus search">
            <input
              type="text"
              placeholder="Search recipes..."
              className="px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </KeyboardTooltip>
        </div>
      </div>
    )}
  </Story>
</Canvas>

## Metric Conversions

<Canvas>
  <Story name="Metric Conversions">
    {() => (
      <div className="space-y-4">
        <div className="space-y-2">
          <h3 className="text-lg font-semibold">Recipe Measurements</h3>
          <div className="space-y-1">
            <div>
              <MetricTooltip
                metric="All-purpose flour"
                value={2}
                unit="cups"
                conversion={{ value: 240, unit: "g", system: "metric" }}
              />
            </div>
            <div>
              <MetricTooltip
                metric="Butter"
                value={4}
                unit="tablespoons"
                conversion={{ value: 60, unit: "g", system: "metric" }}
              />
            </div>
            <div>
              <MetricTooltip
                metric="Milk"
                value={1}
                unit="cup"
                conversion={{ value: 240, unit: "ml", system: "metric" }}
              />
            </div>
            <div>
              <MetricTooltip
                metric="Oven temperature"
                value={350}
                unit="°F"
                conversion={{ value: 175, unit: "°C", system: "metric" }}
              />
            </div>
          </div>
        </div>

        <div className="space-y-2">
          <h3 className="text-lg font-semibold">Weight Measurements</h3>
          <div className="space-y-1">
            <div>
              <MetricTooltip
                metric="Chicken breast"
                value={1}
                unit="lb"
                conversion={{ value: 454, unit: "g", system: "metric" }}
              />
            </div>
            <div>
              <MetricTooltip
                metric="Sugar"
                value={8}
                unit="oz"
                conversion={{ value: 225, unit: "g", system: "metric" }}
              />
            </div>
          </div>
        </div>
      </div>
    )}
  </Story>
</Canvas>

## Recipe Application Examples

<Canvas>
  <Story name="Recipe Examples">
    {() => (
      <div className="max-w-2xl space-y-6">
        <div className="border rounded-lg p-4 space-y-4">
          <h2 className="text-xl font-bold flex items-center gap-2">
            Classic Beef Bourguignon
            <InfoTooltip infoText="A traditional French stew braised in red wine, originating from the Burgundy region" />
          </h2>

          <div className="grid grid-cols-3 gap-4 text-sm">
            <div className="flex items-center gap-1">
              <span>Prep Time: 30 min</span>
              <HelpTooltip helpText="Active preparation time for chopping vegetables and browning meat" iconSize="sm" />
            </div>
            <div className="flex items-center gap-1">
              <span>Cook Time: 2.5 hours</span>
              <HelpTooltip helpText="Slow braising time for tender meat and rich flavor development" iconSize="sm" />
            </div>
            <div className="flex items-center gap-1">
              <span>Difficulty: Medium</span>
              <HelpTooltip helpText="Requires basic knife skills and understanding of braising technique" iconSize="sm" />
            </div>
          </div>

          <div className="space-y-2">
            <h3 className="font-semibold">Instructions:</h3>
            <ol className="space-y-1 text-sm list-decimal list-inside">
              <li>
                Cut beef into 2-inch cubes and <CookingTermTooltip
                  term="dredge"
                  definition="To lightly coat food in flour, breadcrumbs, or other dry ingredients before cooking"
                  category="technique"
                /> in seasoned flour.
              </li>
              <li>
                <CookingTermTooltip
                  term="Brown"
                  definition="To cook the surface of food at high heat until it develops a brown color and rich flavor"
                  category="technique"
                /> the beef in batches to avoid overcrowding.
              </li>
              <li>
                Create a <CookingTermTooltip
                  term="mirepoix"
                  definition="A mixture of diced onions, carrots, and celery used as a flavor base in French cooking"
                  pronunciation="meer-PWAH"
                  category="ingredient"
                /> and sauté until softened.
              </li>
              <li>
                <CookingTermTooltip
                  term="Deglaze"
                  definition="To add liquid to a pan to dissolve the browned bits stuck to the bottom, creating a flavorful base"
                  category="technique"
                /> with red wine and scrape up all the fond.
              </li>
              <li>
                Return beef to pot, add stock, and <CookingTermTooltip
                  term="braise"
                  definition="To cook slowly in a covered pot with a small amount of liquid at low temperature"
                  category="technique"
                /> for 2 hours until tender.
              </li>
            </ol>
          </div>

          <div className="border-t pt-4">
            <div className="flex gap-4 text-sm">
              <KeyboardTooltip shortcut={["Ctrl", "P"]} description="Print recipe">
                <button className="text-blue-600 hover:underline">Print Recipe</button>
              </KeyboardTooltip>
              <KeyboardTooltip shortcut={["Ctrl", "D"]} description="Save to favorites">
                <button className="text-blue-600 hover:underline">Save Recipe</button>
              </KeyboardTooltip>
            </div>
          </div>
        </div>
      </div>
    )}
  </Story>
</Canvas>

## Advanced Usage

<Canvas>
  <Story name="Advanced">
    {() => (
      <div className="space-y-6">
        <div className="space-y-4">
          <h3 className="text-lg font-semibold">Complex Content</h3>
          <SimpleTooltip
            content={
              <div className="space-y-2">
                <div className="font-semibold">Cooking Tips</div>
                <ul className="text-sm space-y-1">
                  <li>• Use room temperature ingredients</li>
                  <li>• Preheat your oven properly</li>
                  <li>• Taste and adjust seasoning</li>
                </ul>
                <div className="text-xs opacity-75 border-t pt-2">
                  Click for full guide
                </div>
              </div>
            }
            size="lg"
            variant="light"
          >
            <button className="px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600">
              Cooking Tips
            </button>
          </SimpleTooltip>
        </div>

        <div className="space-y-4">
          <h3 className="text-lg font-semibold">Delayed Appearance</h3>
          <SimpleTooltip
            content="This tooltip appears after a longer delay"
            delayDuration={1000}
          >
            <div className="p-3 border rounded text-center cursor-help">
              Long Delay (1s)
            </div>
          </SimpleTooltip>

          <SimpleTooltip
            content="This tooltip appears immediately"
            delayDuration={0}
          >
            <div className="p-3 border rounded text-center cursor-help">
              No Delay
            </div>
          </SimpleTooltip>
        </div>
      </div>
    )}
  </Story>
</Canvas>

## API Reference

<ArgsTable of={SimpleTooltip} />

### TooltipContent Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| variant | 'default' \| 'light' \| 'accent' \| 'success' \| 'warning' \| 'error' \| 'info' | 'default' | Visual style variant |
| size | 'sm' \| 'default' \| 'lg' \| 'xl' | 'default' | Size of the tooltip content |
| showArrow | boolean | true | Whether to show the arrow pointing to trigger |

### CookingTermTooltip Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| term | string | - | The cooking term to display |
| definition | string | - | Definition or explanation of the term |
| pronunciation | string | - | Optional pronunciation guide |
| category | 'technique' \| 'ingredient' \| 'equipment' \| 'measurement' \| 'general' | 'general' | Category for styling and icon |

### HelpTooltip Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| helpText | ReactNode | - | Help content to display |
| iconVariant | string | 'default' | Visual style for the help icon |
| iconSize | string | 'default' | Size of the help icon |

### KeyboardTooltip Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| shortcut | string \| string[] | - | Keyboard shortcut keys |
| description | string | - | Optional description of the shortcut |

### MetricTooltip Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| metric | string | - | Name of the measurement |
| value | number | - | Numeric value |
| unit | string | - | Unit of measurement |
| conversion | object | - | Optional conversion information |

## Accessibility

- Full keyboard navigation support
- Screen reader compatible with proper ARIA attributes
- Focus management and visual indicators
- Respects prefers-reduced-motion settings
- Automatic collision detection and repositioning
- Escape key dismisses tooltip
- Focus and hover both trigger tooltips

## Best Practices

### Recipe Application Usage

1. **Cooking Terms**: Use for technical culinary terms that might be unfamiliar
2. **Unit Conversions**: Help users with different measurement systems
3. **UI Guidance**: Provide contextual help for complex interfaces
4. **Keyboard Shortcuts**: Show power user features without cluttering UI
5. **Additional Information**: Enhance content without overwhelming the layout

### Content Guidelines

1. Keep tooltip content concise and focused
2. Use clear, simple language for cooking terms
3. Include pronunciation for foreign culinary terms
4. Provide practical, actionable information
5. Consider mobile users - avoid hover-only critical information

### Accessibility

1. Ensure tooltip content is also available through other means
2. Don't hide essential information in tooltips only
3. Use appropriate ARIA labels and descriptions
4. Test with keyboard navigation and screen readers
5. Provide sufficient color contrast for all variants
