import { Canvas, Meta, Story, Controls } from '@storybook/blocks';
import {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuGroup,
  DropdownMenuSub,
  DropdownMenuSubContent,
  DropdownMenuSubTrigger,
  DropdownMenuRadioGroup,
} from './dropdown';

<Meta
  title="UI Components/Dropdown"
  component={DropdownMenu}
  parameters={{
    layout: 'centered',
    docs: {
      description: {
        component: `
# Dropdown Component

A comprehensive dropdown menu system built on Radix UI primitives for menus, select options, and interactive lists.
Perfect for navigation menus, action menus, filters, and selection interfaces in recipe applications.

## Features

- **Multiple Variants**: Trigger button variants for different contexts
- **Rich Content**: Support for labels, separators, shortcuts, and sub-menus
- **Interactive Items**: Checkbox and radio button items with state management
- **Accessibility**: Full keyboard navigation and screen reader support
- **Flexible Positioning**: Smart positioning with collision detection
- **Recipe-Optimized**: Designed for recipe filtering, sorting, and actions

## Design Principles

- Clear visual hierarchy with semantic styling
- Consistent interaction patterns across all menu types
- High performance with virtual scrolling for large lists
- Touch-friendly sizing for mobile recipe browsing
- Keyboard shortcuts for power users
        `,
      },
    },
  }}
  argTypes={{
    variant: {
      control: { type: 'select' },
      options: ['default', 'secondary', 'outline', 'ghost'],
      description: 'Visual style variant of the trigger button',
    },
    size: {
      control: { type: 'select' },
      options: ['sm', 'default', 'lg'],
      description: 'Size of the trigger button',
    },
  }}
/>

# Dropdown Menu

<Canvas>
  <Story name="Default">
    <DropdownMenu>
      <DropdownMenuTrigger>Open Menu</DropdownMenuTrigger>
      <DropdownMenuContent>
        <DropdownMenuItem>Item 1</DropdownMenuItem>
        <DropdownMenuItem>Item 2</DropdownMenuItem>
        <DropdownMenuItem>Item 3</DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  </Story>
</Canvas>

## Trigger Variants

Different visual styles for the dropdown trigger button:

<Canvas>
  <Story name="Trigger Variants">
    <div className="flex flex-wrap gap-4">
      <DropdownMenu>
        <DropdownMenuTrigger variant="default">Default</DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem>Action 1</DropdownMenuItem>
          <DropdownMenuItem>Action 2</DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>

      <DropdownMenu>
        <DropdownMenuTrigger variant="secondary">Secondary</DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem>Action 1</DropdownMenuItem>
          <DropdownMenuItem>Action 2</DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>

      <DropdownMenu>
        <DropdownMenuTrigger variant="outline">Outline</DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem>Action 1</DropdownMenuItem>
          <DropdownMenuItem>Action 2</DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>

      <DropdownMenu>
        <DropdownMenuTrigger variant="ghost">Ghost</DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem>Action 1</DropdownMenuItem>
          <DropdownMenuItem>Action 2</DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
    </div>
  </Story>
</Canvas>

## Trigger Sizes

Different sizes for various layout contexts:

<Canvas>
  <Story name="Trigger Sizes">
    <div className="flex items-center gap-4">
      <DropdownMenu>
        <DropdownMenuTrigger size="sm">Small</DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem>Action 1</DropdownMenuItem>
          <DropdownMenuItem>Action 2</DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>

      <DropdownMenu>
        <DropdownMenuTrigger size="default">Default</DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem>Action 1</DropdownMenuItem>
          <DropdownMenuItem>Action 2</DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>

      <DropdownMenu>
        <DropdownMenuTrigger size="lg">Large</DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem>Action 1</DropdownMenuItem>
          <DropdownMenuItem>Action 2</DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
    </div>
  </Story>
</Canvas>

## Interactive Items

Dropdown menus with checkbox and radio items:

<Canvas>
  <Story name="Interactive Items">
    <div className="flex gap-4">
      <DropdownMenu>
        <DropdownMenuTrigger>Filters</DropdownMenuTrigger>
        <DropdownMenuContent className="w-56">
          <DropdownMenuLabel>Dietary Preferences</DropdownMenuLabel>
          <DropdownMenuSeparator />
          <DropdownMenuCheckboxItem checked>Vegetarian</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem>Vegan</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem>Gluten-Free</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem>Dairy-Free</DropdownMenuCheckboxItem>
        </DropdownMenuContent>
      </DropdownMenu>

      <DropdownMenu>
        <DropdownMenuTrigger>Sort By</DropdownMenuTrigger>
        <DropdownMenuContent className="w-48">
          <DropdownMenuLabel>Sort Options</DropdownMenuLabel>
          <DropdownMenuSeparator />
          <DropdownMenuRadioGroup value="name">
            <DropdownMenuRadioItem value="name">Recipe Name</DropdownMenuRadioItem>
            <DropdownMenuRadioItem value="date">Date Added</DropdownMenuRadioItem>
            <DropdownMenuRadioItem value="rating">Rating</DropdownMenuRadioItem>
            <DropdownMenuRadioItem value="time">Cook Time</DropdownMenuRadioItem>
          </DropdownMenuRadioGroup>
        </DropdownMenuContent>
      </DropdownMenu>
    </div>
  </Story>
</Canvas>

## Recipe App Examples

### Recipe Actions Menu

<Canvas>
  <Story name="Recipe Actions">
    <DropdownMenu>
      <DropdownMenuTrigger>Recipe Actions</DropdownMenuTrigger>
      <DropdownMenuContent className="w-48">
        <DropdownMenuItem>
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
          </svg>
          View Recipe
        </DropdownMenuItem>
        <DropdownMenuItem>
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
          </svg>
          Edit Recipe
        </DropdownMenuItem>
        <DropdownMenuItem>
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" />
          </svg>
          Share Recipe
        </DropdownMenuItem>
        <DropdownMenuSeparator />
        <DropdownMenuItem>
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
          </svg>
          Add to Favorites
        </DropdownMenuItem>
        <DropdownMenuItem>
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
          </svg>
          Add to Meal Plan
        </DropdownMenuItem>
        <DropdownMenuSeparator />
        <DropdownMenuItem variant="destructive">
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
          </svg>
          Delete Recipe
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  </Story>
</Canvas>

### Recipe Filters

<Canvas>
  <Story name="Recipe Filters">
    <DropdownMenu>
      <DropdownMenuTrigger variant="outline">Advanced Filters</DropdownMenuTrigger>
      <DropdownMenuContent className="w-64">
        <DropdownMenuLabel>Filter Recipes</DropdownMenuLabel>
        <DropdownMenuSeparator />

        <DropdownMenuGroup>
          <DropdownMenuLabel inset>Difficulty</DropdownMenuLabel>
          <DropdownMenuCheckboxItem>Easy (under 30 min)</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem checked>Medium (30-60 min)</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem>Hard (60+ min)</DropdownMenuCheckboxItem>
        </DropdownMenuGroup>

        <DropdownMenuSeparator />

        <DropdownMenuGroup>
          <DropdownMenuLabel inset>Meal Type</DropdownMenuLabel>
          <DropdownMenuCheckboxItem checked>Breakfast</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem>Lunch</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem checked>Dinner</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem>Dessert</DropdownMenuCheckboxItem>
        </DropdownMenuGroup>

        <DropdownMenuSeparator />

        <DropdownMenuGroup>
          <DropdownMenuLabel inset>Dietary</DropdownMenuLabel>
          <DropdownMenuCheckboxItem>Vegetarian</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem>Vegan</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem>Gluten-Free</DropdownMenuCheckboxItem>
          <DropdownMenuCheckboxItem>Keto</DropdownMenuCheckboxItem>
        </DropdownMenuGroup>
      </DropdownMenuContent>
    </DropdownMenu>
  </Story>
</Canvas>

### User Profile Menu

<Canvas>
  <Story name="User Profile Menu">
    <DropdownMenu>
      <DropdownMenuTrigger variant="ghost" className="h-8 w-8 rounded-full bg-gray-200">
        JD
      </DropdownMenuTrigger>
      <DropdownMenuContent className="w-56" align="end">
        <DropdownMenuLabel>My Account</DropdownMenuLabel>
        <DropdownMenuSeparator />
        <DropdownMenuItem>
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
          Profile
          <DropdownMenuShortcut>⇧⌘P</DropdownMenuShortcut>
        </DropdownMenuItem>
        <DropdownMenuItem>
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
          </svg>
          My Recipes
        </DropdownMenuItem>
        <DropdownMenuItem>
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3a4 4 0 118 0v4M8 7h8M8 7l-2 9h12l-2-9" />
          </svg>
          Meal Plans
        </DropdownMenuItem>
        <DropdownMenuSeparator />
        <DropdownMenuItem>
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          Settings
          <DropdownMenuShortcut>⌘,</DropdownMenuShortcut>
        </DropdownMenuItem>
        <DropdownMenuSeparator />
        <DropdownMenuItem>
          <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
          </svg>
          Log out
          <DropdownMenuShortcut>⇧⌘Q</DropdownMenuShortcut>
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  </Story>
</Canvas>

## Sub-Menus

Nested dropdown menus for complex navigation:

<Canvas>
  <Story name="Sub-Menus">
    <DropdownMenu>
      <DropdownMenuTrigger>Categories</DropdownMenuTrigger>
      <DropdownMenuContent className="w-48">
        <DropdownMenuItem>All Recipes</DropdownMenuItem>
        <DropdownMenuSeparator />

        <DropdownMenuSub>
          <DropdownMenuSubTrigger>Cuisines</DropdownMenuSubTrigger>
          <DropdownMenuSubContent>
            <DropdownMenuItem>Italian</DropdownMenuItem>
            <DropdownMenuItem>Mexican</DropdownMenuItem>
            <DropdownMenuItem>Asian</DropdownMenuItem>
            <DropdownMenuItem>Indian</DropdownMenuItem>
            <DropdownMenuItem>Mediterranean</DropdownMenuItem>
          </DropdownMenuSubContent>
        </DropdownMenuSub>

        <DropdownMenuSub>
          <DropdownMenuSubTrigger>Meal Types</DropdownMenuSubTrigger>
          <DropdownMenuSubContent>
            <DropdownMenuItem>Breakfast</DropdownMenuItem>
            <DropdownMenuItem>Lunch</DropdownMenuItem>
            <DropdownMenuItem>Dinner</DropdownMenuItem>
            <DropdownMenuItem>Dessert</DropdownMenuItem>
            <DropdownMenuItem>Snacks</DropdownMenuItem>
          </DropdownMenuSubContent>
        </DropdownMenuSub>

        <DropdownMenuSeparator />
        <DropdownMenuItem>Recent Recipes</DropdownMenuItem>
        <DropdownMenuItem>Popular Recipes</DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  </Story>
</Canvas>

## Accessibility

The Dropdown component follows accessibility best practices:

- **Keyboard Navigation**: Full keyboard support with arrow keys, Enter, and Escape
- **Screen Reader Support**: Proper ARIA labels and announcements
- **Focus Management**: Correct focus handling and visual indicators
- **High Contrast**: Works with high contrast modes and themes
- **Touch Friendly**: Appropriate sizing for mobile interactions

### Keyboard Shortcuts

- **Space/Enter**: Open dropdown or activate item
- **Arrow Keys**: Navigate between items
- **Escape**: Close dropdown
- **Tab**: Move to next focusable element
- **Home/End**: Jump to first/last item

## Implementation

### Basic Dropdown

```tsx
import {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
} from '@/components/ui/dropdown';

<DropdownMenu>
  <DropdownMenuTrigger>Open Menu</DropdownMenuTrigger>
  <DropdownMenuContent>
    <DropdownMenuItem>Action 1</DropdownMenuItem>
    <DropdownMenuItem>Action 2</DropdownMenuItem>
  </DropdownMenuContent>
</DropdownMenu>
```

### Recipe Filter Example

```tsx
function RecipeFilters() {
  const [selectedCuisines, setSelectedCuisines] = useState([]);

  return (
    <DropdownMenu>
      <DropdownMenuTrigger variant="outline">
        Filter Recipes
      </DropdownMenuTrigger>
      <DropdownMenuContent className="w-56">
        <DropdownMenuLabel>Cuisines</DropdownMenuLabel>
        <DropdownMenuSeparator />
        {cuisines.map((cuisine) => (
          <DropdownMenuCheckboxItem
            key={cuisine.id}
            checked={selectedCuisines.includes(cuisine.id)}
            onCheckedChange={(checked) => {
              setSelectedCuisines(prev =>
                checked
                  ? [...prev, cuisine.id]
                  : prev.filter(id => id !== cuisine.id)
              );
            }}
          >
            {cuisine.name}
          </DropdownMenuCheckboxItem>
        ))}
      </DropdownMenuContent>
    </DropdownMenu>
  );
}
```

### Action Menu with Icons

```tsx
function RecipeActionMenu({ recipe }) {
  return (
    <DropdownMenu>
      <DropdownMenuTrigger variant="ghost" size="sm">
        <MoreHorizontalIcon className="h-4 w-4" />
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end" className="w-48">
        <DropdownMenuItem onClick={() => viewRecipe(recipe.id)}>
          <EyeIcon className="mr-2 h-4 w-4" />
          View Recipe
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => editRecipe(recipe.id)}>
          <EditIcon className="mr-2 h-4 w-4" />
          Edit Recipe
        </DropdownMenuItem>
        <DropdownMenuSeparator />
        <DropdownMenuItem
          variant="destructive"
          onClick={() => deleteRecipe(recipe.id)}
        >
          <TrashIcon className="mr-2 h-4 w-4" />
          Delete Recipe
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  );
}
```

## Playground

Experiment with different configurations:

<Canvas>
  <Story
    name="Playground"
    args={{
      variant: 'default',
      size: 'default',
    }}
  >
    {(args) => (
      <DropdownMenu>
        <DropdownMenuTrigger {...args}>
          Customize Me
        </DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem>Option 1</DropdownMenuItem>
          <DropdownMenuItem>Option 2</DropdownMenuItem>
          <DropdownMenuItem>Option 3</DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
    )}
  </Story>
</Canvas>

<Controls />

## Related Components

- **Button**: For simple action triggers
- **Select**: For form input selection
- **Modal**: For complex interactions
- **Popover**: For contextual content
- **Tooltip**: For simple information
