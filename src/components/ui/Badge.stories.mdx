import { Canvas, Meta, Story, Controls } from '@storybook/blocks';
import { Badge } from './badge';

<Meta
  title="UI Components/Badge"
  component={Badge}
  parameters={{
    layout: 'centered',
    docs: {
      description: {
        component: `
# Badge Component

A flexible, accessible badge component for tags, categories, and status indicators.
Perfect for recipe categorization, difficulty levels, cooking times, and status indicators.

## Features

- **Multiple Variants**: 7 semantic variants for different use cases
- **Responsive Sizes**: Small, default, and large sizes
- **Accessibility**: Full keyboard navigation and screen reader support
- **Polymorphic**: Can render as any element using the \`asChild\` prop
- **Recipe-Optimized**: Designed specifically for recipe app use cases

## Design Principles

- Clear visual hierarchy with semantic color coding
- Consistent spacing and typography
- High contrast for accessibility
- Touch-friendly sizing for mobile devices
  `,
  },
  },
  }}
  argTypes={{
      variant: {
        control: { type: 'select' },
        options: ['default', 'secondary', 'destructive', 'outline', 'success', 'warning', 'info'],
        description: 'Visual style variant of the badge',
      },
      size: {
        control: { type: 'select' },
        options: ['sm', 'default', 'lg'],
        description: 'Size of the badge',
      },
      asChild: {
        control: { type: 'boolean' },
        description: 'Render as child element (polymorphic)',
      },
      children: {
        control: { type: 'text' },
        description: 'Badge content',
      },
    }}
  />

# Badge

<Canvas>
  <Story name="Default">
    <Badge>Badge</Badge>
  </Story>
</Canvas>

## Variants

Badges come in 7 semantic variants, each designed for specific use cases in the recipe application:

<Canvas>
  <Story name="All Variants">
    <div className="flex flex-wrap gap-2">
      <Badge variant="default">Default</Badge>
      <Badge variant="secondary">Secondary</Badge>
      <Badge variant="destructive">Destructive</Badge>
      <Badge variant="outline">Outline</Badge>
      <Badge variant="success">Success</Badge>
      <Badge variant="warning">Warning</Badge>
      <Badge variant="info">Info</Badge>
    </div>
  </Story>
</Canvas>

### Variant Usage Guidelines

- **Default**: Primary brand badges, featured content
- **Secondary**: Less prominent tags, secondary categories
- **Destructive**: Error states, warnings, expired content
- **Outline**: Subtle emphasis, filter states
- **Success**: Published recipes, completed states, positive indicators
- **Warning**: Draft content, pending states, caution indicators
- **Info**: New content, informational badges, helpful tips

## Sizes

Three sizes are available to accommodate different layout needs:

<Canvas>
  <Story name="All Sizes">
    <div className="flex items-center gap-3">
      <Badge size="sm">Small</Badge>
      <Badge size="default">Default</Badge>
      <Badge size="lg">Large</Badge>
    </div>
  </Story>
</Canvas>

## Recipe App Examples

Here are common use cases for badges in the recipe application:

### Recipe Categories

<Canvas>
  <Story name="Recipe Categories">
    <div className="flex flex-wrap gap-2">
      <Badge variant="info">Breakfast</Badge>
      <Badge variant="info">Lunch</Badge>
      <Badge variant="info">Dinner</Badge>
      <Badge variant="info">Dessert</Badge>
      <Badge variant="info">Snack</Badge>
      <Badge variant="info">Appetizer</Badge>
    </div>
  </Story>
</Canvas>

### Difficulty Levels

<Canvas>
  <Story name="Difficulty Levels">
    <div className="flex flex-wrap gap-2">
      <Badge variant="success">Easy</Badge>
      <Badge variant="warning">Medium</Badge>
      <Badge variant="destructive">Hard</Badge>
    </div>
  </Story>
</Canvas>

### Dietary Restrictions

<Canvas>
  <Story name="Dietary Restrictions">
    <div className="flex flex-wrap gap-2">
      <Badge variant="outline">Vegetarian</Badge>
      <Badge variant="outline">Vegan</Badge>
      <Badge variant="outline">Gluten-Free</Badge>
      <Badge variant="outline">Dairy-Free</Badge>
      <Badge variant="outline">Keto</Badge>
      <Badge variant="outline">Low-Carb</Badge>
    </div>
  </Story>
</Canvas>

### Recipe Status

<Canvas>
  <Story name="Recipe Status">
    <div className="flex flex-wrap gap-2">
      <Badge variant="success">Published</Badge>
      <Badge variant="warning">Draft</Badge>
      <Badge variant="secondary">Private</Badge>
      <Badge variant="info">New</Badge>
      <Badge variant="destructive">Archived</Badge>
    </div>
  </Story>
</Canvas>

### Cooking Times

<Canvas>
  <Story name="Cooking Times">
    <div className="flex flex-wrap gap-2">
      <Badge variant="secondary" size="sm">
        5 min
      </Badge>
      <Badge variant="secondary" size="sm">
        15 min
      </Badge>
      <Badge variant="secondary" size="sm">
        30 min
      </Badge>
      <Badge variant="secondary" size="sm">
        1 hour
      </Badge>
      <Badge variant="secondary" size="sm">
        2+ hours
      </Badge>
    </div>
  </Story>
</Canvas>

## Interactive Examples

### Polymorphic Usage

Badges can render as any element using the `asChild` prop:

<Canvas>
  <Story name="Polymorphic">
    <div className="flex flex-wrap gap-2">
      <Badge asChild>
        <a href="#" className="no-underline hover:no-underline">
          Link Badge
        </a>
      </Badge>
      <Badge variant="outline" asChild>
        <button type="button">Button Badge</button>
      </Badge>
    </div>
  </Story>
</Canvas>

### With Icons

Badges work well with small icons:

<Canvas>
  <Story name="With Icons">
    <div className="flex flex-wrap gap-2">
      <Badge variant="success" className="gap-1">
        <svg className="h-3 w-3" fill="currentColor" viewBox="0 0 20 20">
          <path
            fillRule="evenodd"
            d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
            clipRule="evenodd"
          />
        </svg>
        Verified
      </Badge>
      <Badge variant="warning" className="gap-1">
        <svg className="h-3 w-3" fill="currentColor" viewBox="0 0 20 20">
          <path
            fillRule="evenodd"
            d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
            clipRule="evenodd"
          />
        </svg>
        Warning
      </Badge>
    </div>
  </Story>
</Canvas>

## Accessibility

The Badge component follows accessibility best practices:

- **Semantic HTML**: Uses appropriate element types
- **Color Independence**: Information is not conveyed by color alone
- **High Contrast**: Meets WCAG AA contrast requirements
- **Screen Readers**: Descriptive text for context
- **Keyboard Navigation**: Full keyboard support when interactive

### Usage with Screen Readers

When using badges to convey important information, consider adding screen reader context:

```tsx
<Badge variant="success" aria-label="Recipe status: Published">
  Published
</Badge>

<Badge variant="warning" aria-label="Difficulty level: Medium">
  Medium
</Badge>
```

## Implementation

### Basic Usage

```tsx
import { Badge } from '@/components/ui/badge';

// Simple badge
<Badge>New Recipe</Badge>

// With variant and size
<Badge variant="success" size="lg">Featured</Badge>
```

### Recipe Card Integration

```tsx
function RecipeCard({ recipe }) {
  return (
    <div className="recipe-card">
      <h3>{recipe.title}</h3>
      <div className="mt-2 flex gap-2">
        <Badge variant="outline" size="sm">
          {recipe.cookTime} min
        </Badge>
        <Badge variant={getDifficultyVariant(recipe.difficulty)}>
          {recipe.difficulty}
        </Badge>
        {recipe.categories.map(category => (
          <Badge key={category} variant="secondary" size="sm">
            {category}
          </Badge>
        ))}
      </div>
    </div>
  );
}
```

### Filter Integration

```tsx
function RecipeFilters({ activeFilters, onRemoveFilter }) {
  return (
    <div className="flex flex-wrap gap-2">
      {activeFilters.map(filter => (
        <Badge key={filter.id} variant="outline" className="gap-1 pr-1" asChild>
          <button onClick={() => onRemoveFilter(filter.id)}>
            {filter.label}
            <XIcon className="h-3 w-3" />
          </button>
        </Badge>
      ))}
    </div>
  );
}
```

## Playground

Experiment with different combinations:

<Canvas>
  <Story
    name="Playground"
    args={{
      children: 'Badge Text',
      variant: 'default',
      size: 'default',
      asChild: false,
    }}
  >
    {args => <Badge {...args} />}
  </Story>
</Canvas>

<Controls />

## Related Components

- **Button**: For interactive actions
- **Chip**: For removable filter tags
- **Tag**: For user-generated tags
- **Status**: For system status indicators
